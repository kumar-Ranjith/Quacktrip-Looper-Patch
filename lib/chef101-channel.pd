#N struct rect float x float y float z float c;
#N canvas 1045 69 1231 756 12;
#X scalar rect 45.4597 22.0179 15.0585 909 \;;
#X symbolatom 22 85 10 0 0 0 - #0-name-set #0-name;
#X obj 21 26 vsl 15 51 0 100 0 0 \$0-gain \$0-gain-set empty 0 -9 0
10 -262144 -1 -1 2500 1;
#X obj 44 71 hsl 20 10 0 10 0 0 \$0-pan \$0-pan-set empty -2 -8 0 10
-262144 -1 -1 0 1;
#X obj 49 472 r \$1-all-meters;
#X obj 49 497 list split;
#X obj 217 435 loadbang;
#X obj 225 457 bng 15 250 50 0 empty empty empty 17 7 0 10 -262144
-1 -1;
#X obj 206 478 f \$2;
#X obj 234 690 pointer;
#X obj 581 711 namecanvas canvas-\$1-\$2;
#X obj 234 640 symbol canvas-\$1-\$2;
#X msg 234 665 traverse \$1 \, next \, bang;
#X obj 173 561 dbtorms;
#X obj 173 585 sqrt;
#X obj 31 161 r names-\$1-\$2;
#X obj 31 280 s \$0-name;
#X obj 115 305 s \$0-pan;
#X obj 125 275 s \$0-gain;
#X msg 125 251 50;
#X obj 587 605 setctl \$0-name;
#X obj 590 628 setctl \$0-gain;
#X obj 590 651 setctl \$0-pan;
#X obj 476 432 r \$0-name;
#X obj 428 460 symbol -;
#X obj 173 660 t f b;
#X msg 119 661 909;
#X obj 133 689 set rect c z;
#X floatatom 87 691 5 0 0 0 - - -;
#X floatatom 206 529 5 0 0 0 - - -;
#X obj 206 411 r \$1-init-panel;
#X obj 173 610 * 25;
#X text 269 25 args: parent-patch-\$0 \, voice-number \, group-number
;
#X obj 427 430 t b b;
#X obj 1002 568 r \$0-gain;
#X obj 1028 598 t f b;
#X obj 1028 624 expr min(70 \, $f1 * 50/max($f2 \, 1)), f 17;
#X obj 1091 596 f;
#X obj 881 628 expr $f1*$f2/50;
#X obj 882 707 s \$0-gain;
#X obj 1014 532 t f f;
#X obj 1014 480 r \$1-\$3-group-gain;
#X msg 1108 543 50;
#X obj 31 186 t l b;
#X obj 1108 515 r \$0-groupinit;
#X obj 85 186 s \$0-groupinit;
#X obj 1014 505 max 1;
#X obj 77 68 tgl 15 0 \$0-solo \$0-solo-set empty 17 7 0 10 -262144
-1 -1 0 1;
#X text 34 41 -;
#X obj 488 656 r \$1-no-solo;
#X msg 488 681 0;
#X obj 593 677 setctl \$0-solo;
#X obj 488 706 s \$0-solo;
#X obj 813 425 r \$0-gain;
#X obj 833 486 r \$0-pan;
#X obj 685 398 r \$1-channel-request-controls;
#X obj 737 545 s \$1-channel-controls;
#X obj 813 450 moses 2;
#X msg 780 450 0;
#X obj 685 423 b;
#X obj 427 405 r \$1-channel-request-names;
#X obj 430 515 s \$1-channel-names;
#X obj 835 511 r \$0-solo;
#X obj 882 654 t f f;
#X obj 966 689 expr $f1 >= $f2 || $f3 < $f4;
#X obj 882 683 spigot;
#X obj 1166 627 t f b;
#X obj 1180 659 f;
#X text 252 480 figure out our index in the list of all meters, f
14;
#X text 430 382 sent once when roster is read;
#X text 708 378 sent metronomically;
#X text 1021 441 adjust local gain if group gain changes, f 20;
#X obj 87 629 sel 0;
#X msg 87 660 0;
#X obj 173 635 + 1;
#X obj 19 606 s \$0-gain;
#X obj 19 580 clip 0 100;
#X obj 99 579 clip 0 10;
#X obj 99 606 s \$0-pan;
#X obj 701 458 r \$0-name;
#X obj 685 487 symbol -;
#X text 716 565 response: name \, gain \, pan \, solo;
#X obj 206 503 * 5;
#X obj 47 525 unpack s 0 0 0 0;
#X text 11 374 update VU meter. The list goes to all meters so we pick
out our 5 params (name \, flag \, gain \, pan \, vu), f 25;
#X text 34 134 initial name \, gain \, pan;
#X obj 31 216 unpack s 0 0;
#X obj 45 248 s \$0-flag;
#X text 430 538 response: name \, flag;
#X obj 496 487 r \$0-flag;
#X obj 429 487 pack s 0;
#X obj 736 517 pack s 0 0 0;
#X obj 19 557 spigot;
#X obj 99 554 spigot;
#X obj 316 602 != 1;
#X floatatom 380 609 5 0 0 0 - - -;
#X obj 313 567 r \$1-this-caller;
#X connect 4 0 5 0;
#X connect 5 1 83 0;
#X connect 6 0 8 0;
#X connect 7 0 8 0;
#X connect 8 0 82 0;
#X connect 9 0 27 2;
#X connect 11 0 12 0;
#X connect 12 0 9 0;
#X connect 13 0 14 0;
#X connect 14 0 31 0;
#X connect 15 0 43 0;
#X connect 19 0 18 0;
#X connect 23 0 24 1;
#X connect 24 0 90 0;
#X connect 25 0 27 1;
#X connect 25 1 11 0;
#X connect 26 0 28 0;
#X connect 26 0 27 0;
#X connect 30 0 8 0;
#X connect 31 0 74 0;
#X connect 33 0 24 0;
#X connect 34 0 35 0;
#X connect 34 0 64 1;
#X connect 35 0 36 0;
#X connect 35 1 37 0;
#X connect 36 0 38 1;
#X connect 37 0 36 1;
#X connect 38 0 63 0;
#X connect 40 0 38 0;
#X connect 40 1 37 1;
#X connect 40 1 66 0;
#X connect 41 0 46 0;
#X connect 42 0 36 1;
#X connect 42 0 37 1;
#X connect 43 0 86 0;
#X connect 43 1 45 0;
#X connect 44 0 42 0;
#X connect 46 0 40 0;
#X connect 49 0 50 0;
#X connect 50 0 52 0;
#X connect 53 0 57 0;
#X connect 54 0 91 2;
#X connect 55 0 59 0;
#X connect 57 0 58 0;
#X connect 57 1 91 1;
#X connect 58 0 91 1;
#X connect 59 0 80 0;
#X connect 60 0 33 0;
#X connect 62 0 91 3;
#X connect 63 0 65 0;
#X connect 63 1 64 0;
#X connect 64 0 65 1;
#X connect 65 0 39 0;
#X connect 66 0 67 1;
#X connect 66 0 64 2;
#X connect 66 1 67 0;
#X connect 67 0 64 3;
#X connect 72 0 73 0;
#X connect 72 1 26 0;
#X connect 73 0 28 0;
#X connect 73 0 27 0;
#X connect 74 0 25 0;
#X connect 76 0 75 0;
#X connect 77 0 78 0;
#X connect 79 0 80 1;
#X connect 80 0 91 0;
#X connect 82 0 5 1;
#X connect 82 0 29 0;
#X connect 83 2 92 0;
#X connect 83 3 93 0;
#X connect 83 4 13 0;
#X connect 83 4 72 0;
#X connect 86 0 16 0;
#X connect 86 1 87 0;
#X connect 86 2 19 0;
#X connect 86 2 17 0;
#X connect 89 0 90 1;
#X connect 90 0 61 0;
#X connect 91 0 56 0;
#X connect 92 0 76 0;
#X connect 93 0 77 0;
#X connect 94 0 93 1;
#X connect 94 0 92 1;
#X connect 96 0 94 0;
#X connect 96 0 95 0;
#X coords 0 0 75 80 75 85 2 20 20;
